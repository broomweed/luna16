#at $84 "vblank interrupt"
    reti

#at $100 "Sprite Loader"
    ; Load palette
    mov a, %0_11111_11111_11111
    sw [$d400], a
    cpl a
    sw [$d480], a
    mov a, %0_00000_00000_00000
    sw [$d402], a
    cpl a
    sw [$d482], a
    mov a, %0_11111_00000_00000
    sw [$d404], a
    cpl a
    sw [$d484], a
    mov a, %0_00000_11111_00000
    sw [$d406], a
    cpl a
    sw [$d486], a
    mov a, %0_00000_00000_11111
    sw [$d408], a
    cpl a
    sw [$d488], a

    ; Load sprite data into pattern table
    mov a, 0
copysprite:
    lw d, sprite[a]
    sw $d500[a], d
    add a, 2
    cmp a, 32
    jlt copysprite

    ; Place sprite in OAM
    mov a, $0000
    sw [$d000], a
    mov a, $1a1a
    sw [$d002], a

mainloop:
    ; Sprite vertical scroll
    lb a, [$d7ff]
    inc a
    sb [$d7ff], a

    lb a, [$d7fe]
    inc a
    sb [$d7fe], a

    lb a, [$d7fb]
    inc a
    sb [$d7fb], a

    halt
    jmp mainloop

#section "Sprite data"
sprite:
    data 00111100
    data 01222210
    data 12333321
    data 123cc321
    data 123cc321
    data 12333321
    data 01222210
    data 00111100
